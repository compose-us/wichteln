import{S as P,i as F,s as G,j as _,m as d,o as h,x as f,u as $,v as g,T as K,k as v,e as k,n as b,c as w,a as N,d as u,b as j,f as m,F as C,w as L,N as R,A as U,U as q,V as z,W,t as y,g as I,r as S,O as X,X as Y,l as V,Y as Z,Z as H,h as J}from"../chunks/vendor-52cac395.js";import{p as A}from"../chunks/participants-store-535378ac.js";import{C as Q}from"../chunks/card-label-8e38f8e3.js";const D=c=>{const e=[...c];for(let a=0;a<e.length;a++){const s=a+Math.floor(Math.random()*(e.length-a)),t=e[s];e[s]=e[a],e[a]=t}return e},x=(c,e)=>{let a=0;for(let s=0;s<e.length;s++)c[s]===e[s]&&a++;return a===0};function ee(c,{participant:e,assignment:a}){const s=`${e.firstName} ${e.lastName}`,t=btoa(`${a.firstName} ${a.lastName}`),l=new URLSearchParams({assignee:s,secret:t}).toString();return`${c}/secret/?${l}`}function E(c,e,a){const s=c.slice();return s[8]=e[a],s[10]=a,s}function T(c){let e,a;return e=new q({props:{$$slots:{default:[ae]},$$scope:{ctx:c}}}),{c(){_(e.$$.fragment)},l(s){d(e.$$.fragment,s)},m(s,t){h(e,s,t),a=!0},p(s,t){const l={};t&2060&&(l.$$scope={dirty:t,ctx:s}),e.$set(l)},i(s){a||(f(e.$$.fragment,s),a=!0)},o(s){$(e.$$.fragment,s),a=!1},d(s){g(e,s)}}}function te(c){let e=`${c[8].firstName} ${c[8].lastName}`,a,s;return{c(){a=y(e),s=v()},l(t){a=I(t,e),s=b(t)},m(t,l){m(t,a,l),m(t,s,l)},p(t,l){l&8&&e!==(e=`${t[8].firstName} ${t[8].lastName}`)&&J(a,e)},d(t){t&&u(a),t&&u(s)}}}function B(c){let e,a;function s(){return c[5](c[10])}return e=new H({props:{action:!0,href:"#",color:c[8].copied?"success":"light",$$slots:{default:[te]},$$scope:{ctx:c}}}),e.$on("click",s),{c(){_(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,l){h(e,t,l),a=!0},p(t,l){c=t;const n={};l&8&&(n.color=c[8].copied?"success":"light"),l&2056&&(n.$$scope={dirty:l,ctx:c}),e.$set(n)},i(t){a||(f(e.$$.fragment,t),a=!0)},o(t){$(e.$$.fragment,t),a=!1},d(t){g(e,t)}}}function se(c){let e,a,s=c[3],t=[];for(let n=0;n<s.length;n+=1)t[n]=B(E(c,s,n));const l=n=>$(t[n],1,1,()=>{t[n]=null});return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=V()},l(n){for(let r=0;r<t.length;r+=1)t[r].l(n);e=V()},m(n,r){for(let o=0;o<t.length;o+=1)t[o].m(n,r);m(n,e,r),a=!0},p(n,r){if(r&28){s=n[3];let o;for(o=0;o<s.length;o+=1){const i=E(n,s,o);t[o]?(t[o].p(i,r),f(t[o],1)):(t[o]=B(i),t[o].c(),f(t[o],1),t[o].m(e.parentNode,e))}for(S(),o=s.length;o<t.length;o+=1)l(o);L()}},i(n){if(!a){for(let r=0;r<s.length;r+=1)f(t[r]);a=!0}},o(n){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)$(t[r]);a=!1},d(n){Z(t,n),n&&u(e)}}}function re(c){let e,a,s,t;return s=new Y({props:{$$slots:{default:[se]},$$scope:{ctx:c}}}),{c(){e=k("div"),a=k("div"),_(s.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var n=N(e);a=w(n,"DIV",{class:!0});var r=N(a);d(s.$$.fragment,r),r.forEach(u),n.forEach(u),this.h()},h(){j(a,"class","list svelte-syrxja"),j(e,"class","container svelte-syrxja")},m(l,n){m(l,e,n),C(e,a),h(s,a,null),t=!0},p(l,n){const r={};n&2060&&(r.$$scope={dirty:n,ctx:l}),s.$set(r)},i(l){t||(f(s.$$.fragment,l),t=!0)},o(l){$(s.$$.fragment,l),t=!1},d(l){l&&u(e),g(s)}}}function ae(c){let e,a,s,t,l,n;return e=new Q({props:{label:"Teilnehmer Links",backBtn:!0}}),s=new z({props:{$$slots:{default:[re]},$$scope:{ctx:c}}}),l=new W({}),{c(){_(e.$$.fragment),a=v(),_(s.$$.fragment),t=v(),_(l.$$.fragment)},l(r){d(e.$$.fragment,r),a=b(r),d(s.$$.fragment,r),t=b(r),d(l.$$.fragment,r)},m(r,o){h(e,r,o),m(r,a,o),h(s,r,o),m(r,t,o),h(l,r,o),n=!0},p(r,o){const i={};o&2060&&(i.$$scope={dirty:o,ctx:r}),s.$set(i)},i(r){n||(f(e.$$.fragment,r),f(s.$$.fragment,r),f(l.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),$(s.$$.fragment,r),$(l.$$.fragment,r),n=!1},d(r){g(e,r),r&&u(a),g(s,r),r&&u(t),g(l,r)}}}function ne(c){let e;return{c(){e=y("Kopiert!")},l(a){e=I(a,"Kopiert!")},m(a,s){m(a,e,s)},d(a){a&&u(e)}}}function le(c){let e,a,s,t,l,n=c[0]&&T(c);return t=new K({props:{isOpen:c[1],fade:!0,$$slots:{default:[ne]},$$scope:{ctx:c}}}),{c(){n&&n.c(),e=v(),a=k("div"),s=k("div"),_(t.$$.fragment),this.h()},l(r){n&&n.l(r),e=b(r),a=w(r,"DIV",{class:!0});var o=N(a);s=w(o,"DIV",{class:!0});var i=N(s);d(t.$$.fragment,i),i.forEach(u),o.forEach(u),this.h()},h(){j(s,"class","alert-content svelte-syrxja"),j(a,"class","alert svelte-syrxja")},m(r,o){n&&n.m(r,o),m(r,e,o),m(r,a,o),C(a,s),h(t,s,null),l=!0},p(r,[o]){r[0]?n?(n.p(r,o),o&1&&f(n,1)):(n=T(r),n.c(),f(n,1),n.m(e.parentNode,e)):n&&(S(),$(n,1,1,()=>{n=null}),L());const i={};o&2&&(i.isOpen=r[1]),o&2048&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){l||(f(n),f(t.$$.fragment,r),l=!0)},o(r){$(n),$(t.$$.fragment,r),l=!1},d(r){n&&n.d(r),r&&u(e),r&&u(a),g(t)}}}function oe(c,e,a){let s;R(c,A,p=>a(3,s=p));let t=!1,l=!1,n=[];U(()=>{s.length===0?document.location="/":a(0,t=!0)}),n=D(s);const r=()=>{x(s,n)||o()},o=()=>{a(2,n=D(s)),r()},i=(p,M)=>{const O=ee(document.location.origin,{participant:s[p],assignment:M});navigator.clipboard.writeText(O),a(1,l=!0),X(A,s[p].copied=!0,s),setTimeout(()=>{a(1,l=!1)},1e3)};return r(),[t,l,n,s,i,p=>i(p,n[p])]}class $e extends P{constructor(e){super();F(this,e,oe,le,G,{})}}export{$e as default};
